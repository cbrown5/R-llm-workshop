<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Planning your analysis with Ask mode | Quality R analysis with large language models</title>
  <meta name="description" content="1-day workshop for using large language models to generate R code." />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Planning your analysis with Ask mode | Quality R analysis with large language models" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="1-day workshop for using large language models to generate R code." />
  <meta name="github-repo" content="cbrown5/R-llm-workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Planning your analysis with Ask mode | Quality R analysis with large language models" />
  
  <meta name="twitter:description" content="1-day workshop for using large language models to generate R code." />
  

<meta name="author" content="CJ Brown (c.j.brown@utas.edu.au)" />


<meta name="date" content="2025-05-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="inline-code-editing.html"/>
<link rel="next" href="creating-your-code-with-edit-mode.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Quality R analysis with large language models</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Quality R analysis with large language models</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#summary"><i class="fa fa-check"></i><b>1.1</b> Summary</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#about-chris"><i class="fa fa-check"></i><b>1.2</b> About Chris</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#citation-for-course"><i class="fa fa-check"></i><b>1.3</b> Citation for course</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i><b>1.4</b> Course outline</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#software-youll-need-for-this-workshop"><i class="fa fa-check"></i><b>1.5</b> Software you’ll need for this workshop</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#optional-software"><i class="fa fa-check"></i><b>1.5.1</b> Optional software</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#software-licenses"><i class="fa fa-check"></i><b>1.6</b> Software licenses</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#r-packages-youll-need-for-this-workshop"><i class="fa fa-check"></i><b>1.7</b> R packages you’ll need for this workshop</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.8</b> Data</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#benthic-cover-surveys-and-fish-habitat"><i class="fa fa-check"></i><b>1.8.1</b> Benthic cover surveys and fish habitat</a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#rock-lobster-time-series"><i class="fa fa-check"></i><b>1.8.2</b> Rock lobster time-series</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-llms-for-r.html"><a href="introduction-to-llms-for-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to LLMs for R</a></li>
<li class="chapter" data-level="3" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html"><i class="fa fa-check"></i><b>3</b> LLM prompting fundamentals</a>
<ul>
<li class="chapter" data-level="3.1" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#setup-authorisation"><i class="fa fa-check"></i><b>3.1</b> Setup authorisation</a></li>
<li class="chapter" data-level="3.2" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#understanding-how-llms-work"><i class="fa fa-check"></i><b>3.2</b> Understanding how LLMs work</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#token-by-token-prediction"><i class="fa fa-check"></i><b>3.2.1</b> Token-by-token prediction</a></li>
<li class="chapter" data-level="3.2.2" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#temperature-effects"><i class="fa fa-check"></i><b>3.2.2</b> Temperature effects</a></li>
<li class="chapter" data-level="3.2.3" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#comparing-model-complexity"><i class="fa fa-check"></i><b>3.2.3</b> Comparing model complexity</a></li>
<li class="chapter" data-level="3.2.4" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#understanding-context-windows"><i class="fa fa-check"></i><b>3.2.4</b> Understanding context windows</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#diy-stats-bot"><i class="fa fa-check"></i><b>3.3</b> DIY stats bot</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#improving-the-stats-bot"><i class="fa fa-check"></i><b>3.3.1</b> Improving the stats bot</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#advanced-prompting"><i class="fa fa-check"></i><b>3.4</b> Advanced prompting</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#zero-shot"><i class="fa fa-check"></i><b>3.4.1</b> Zero-shot</a></li>
<li class="chapter" data-level="3.4.2" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#one-shot-and-multi-shot-prompts"><i class="fa fa-check"></i><b>3.4.2</b> One-shot and multi-shot prompts</a></li>
<li class="chapter" data-level="3.4.3" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#making-a-simple-tool"><i class="fa fa-check"></i><b>3.4.3</b> Making a simple tool</a></li>
<li class="chapter" data-level="3.4.4" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#summary-of-agents-and-tools"><i class="fa fa-check"></i><b>3.4.4</b> Summary of agents and tools</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="llm-prompting-fundamentals.html"><a href="llm-prompting-fundamentals.html#reflection-on-prompting-fundamentals"><i class="fa fa-check"></i><b>3.5</b> Reflection on prompting fundamentals</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="github-copilot-for-r.html"><a href="github-copilot-for-r.html"><i class="fa fa-check"></i><b>4</b> Github copilot for R</a></li>
<li class="chapter" data-level="5" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html"><i class="fa fa-check"></i><b>5</b> Best practices project setup</a>
<ul>
<li class="chapter" data-level="5.1" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html#project-organization"><i class="fa fa-check"></i><b>5.1</b> Project organization</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html#general-guidance"><i class="fa fa-check"></i><b>5.1.1</b> General guidance</a></li>
<li class="chapter" data-level="5.1.2" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html#project-directory-structure-example"><i class="fa fa-check"></i><b>5.1.2</b> Project directory structure example</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html#the-readme.md-file"><i class="fa fa-check"></i><b>5.2</b> The README.md file</a></li>
<li class="chapter" data-level="5.3" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html#example-data"><i class="fa fa-check"></i><b>5.3</b> Example data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="best-practices-project-setup.html"><a href="best-practices-project-setup.html#case-study-bumphead-parrotfish-topa-in-solomon-islands"><i class="fa fa-check"></i><b>5.3.1</b> Case-study: Bumphead parrotfish, ‘Topa’ in Solomon Islands</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="inline-code-editing.html"><a href="inline-code-editing.html"><i class="fa fa-check"></i><b>6</b> Inline code editing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="inline-code-editing.html"><a href="inline-code-editing.html#code-completion"><i class="fa fa-check"></i><b>6.1</b> 1. Code completion</a></li>
<li class="chapter" data-level="6.2" data-path="inline-code-editing.html"><a href="inline-code-editing.html#using-comments"><i class="fa fa-check"></i><b>6.2</b> 2. Using comments</a></li>
<li class="chapter" data-level="6.3" data-path="inline-code-editing.html"><a href="inline-code-editing.html#code-completion-settings"><i class="fa fa-check"></i><b>6.3</b> 3. Code completion settings</a></li>
<li class="chapter" data-level="6.4" data-path="inline-code-editing.html"><a href="inline-code-editing.html#inline-code-generation"><i class="fa fa-check"></i><b>6.4</b> 4. Inline code generation</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="inline-code-editing.html"><a href="inline-code-editing.html#prompt-shortcuts"><i class="fa fa-check"></i><b>6.4.1</b> Prompt shortcuts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html"><i class="fa fa-check"></i><b>7</b> Planning your analysis with Ask mode</a>
<ul>
<li class="chapter" data-level="7.1" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#stages-of-analysis"><i class="fa fa-check"></i><b>7.1</b> Stages of analysis</a></li>
<li class="chapter" data-level="7.2" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#ask-mode"><i class="fa fa-check"></i><b>7.2</b> Ask mode</a></li>
<li class="chapter" data-level="7.3" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#the-jagged-frontier-of-llm-progress"><i class="fa fa-check"></i><b>7.3</b> The jagged frontier of LLM progress</a></li>
<li class="chapter" data-level="7.4" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#how-to-prompt-for-better-statistical-advice"><i class="fa fa-check"></i><b>7.4</b> How to prompt for better statistical advice</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#guidelines-for-prompting-for-statistical-advice"><i class="fa fa-check"></i><b>7.4.1</b> Guidelines for prompting for statistical advice</a></li>
<li class="chapter" data-level="7.4.2" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#improving-our-initial-prompt-by-attaching-data"><i class="fa fa-check"></i><b>7.4.2</b> Improving our initial prompt by attaching data</a></li>
<li class="chapter" data-level="7.4.3" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#improving-our-initial-prompt-by-attaching-domain-knowledge"><i class="fa fa-check"></i><b>7.4.3</b> Improving our initial prompt by attaching domain knowledge</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="planning-your-analysis-with-ask-mode.html"><a href="planning-your-analysis-with-ask-mode.html#planning-implementation"><i class="fa fa-check"></i><b>7.5</b> Planning implementation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html"><i class="fa fa-check"></i><b>8</b> Creating your code with Edit mode</a>
<ul>
<li class="chapter" data-level="8.1" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html#adding-a-plan-to-the-readme"><i class="fa fa-check"></i><b>8.1</b> Adding a plan to the readme</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html#working-through-your-plan"><i class="fa fa-check"></i><b>8.1.1</b> Working through your plan</a></li>
<li class="chapter" data-level="8.1.2" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html#why-so-much-code"><i class="fa fa-check"></i><b>8.1.2</b> Why so much code?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html#workflows-and-tips-for-edit-mode"><i class="fa fa-check"></i><b>8.2</b> Workflows and tips for edit mode</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html#suggested-workflow-for-new-analyses"><i class="fa fa-check"></i><b>8.2.1</b> Suggested workflow for new analyses</a></li>
<li class="chapter" data-level="8.2.2" data-path="creating-your-code-with-edit-mode.html"><a href="creating-your-code-with-edit-mode.html#suggested-workflow-for-analyses-i-know-well"><i class="fa fa-check"></i><b>8.2.2</b> Suggested workflow for analyses I know well</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html"><i class="fa fa-check"></i><b>9</b> Automated workflows with Agent mode</a>
<ul>
<li class="chapter" data-level="9.1" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#exploring-agent-mode"><i class="fa fa-check"></i><b>9.1</b> Exploring agent mode</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#motivating-example-bayesian-time-series-analysis"><i class="fa fa-check"></i><b>9.1.1</b> Motivating example Bayesian time-series analysis</a></li>
<li class="chapter" data-level="9.1.2" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#set-up-your-project"><i class="fa fa-check"></i><b>9.1.2</b> Set-up your project</a></li>
<li class="chapter" data-level="9.1.3" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#prompts-i-used"><i class="fa fa-check"></i><b>9.1.3</b> Prompts I used</a></li>
<li class="chapter" data-level="9.1.4" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#writing-up-the-project"><i class="fa fa-check"></i><b>9.1.4</b> Writing up the project?</a></li>
<li class="chapter" data-level="9.1.5" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#custom-intstructions"><i class="fa fa-check"></i><b>9.1.5</b> Custom intstructions</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="automated-workflows-with-agent-mode.html"><a href="automated-workflows-with-agent-mode.html#summary-1"><i class="fa fa-check"></i><b>9.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html"><i class="fa fa-check"></i><b>10</b> Ethics and copyright</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html#sustainability"><i class="fa fa-check"></i><b>10.1</b> Sustainability</a></li>
<li class="chapter" data-level="10.2" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html#model-biases"><i class="fa fa-check"></i><b>10.2</b> Model biases</a></li>
<li class="chapter" data-level="10.3" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html#rising-inequality"><i class="fa fa-check"></i><b>10.3</b> Rising inequality</a></li>
<li class="chapter" data-level="10.4" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html#copyright"><i class="fa fa-check"></i><b>10.4</b> Copyright</a></li>
<li class="chapter" data-level="10.5" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html#managing-data-privacy"><i class="fa fa-check"></i><b>10.5</b> Managing data privacy</a></li>
<li class="chapter" data-level="10.6" data-path="ethics-and-copyright.html"><a href="ethics-and-copyright.html#supplement-calculations-of-personal-environmental-impact-from-using-llms"><i class="fa fa-check"></i><b>10.6</b> Supplement: Calculations of personal environmental impact from using LLMs</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="advanced-llm-agents.html"><a href="advanced-llm-agents.html"><i class="fa fa-check"></i><b>11</b> Advanced LLM agents</a></li>
<li class="chapter" data-level="12" data-path="cost-and-security.html"><a href="cost-and-security.html"><i class="fa fa-check"></i><b>12</b> Cost and security</a>
<ul>
<li class="chapter" data-level="12.1" data-path="cost-and-security.html"><a href="cost-and-security.html#cost-considerations"><i class="fa fa-check"></i><b>12.1</b> Cost considerations</a></li>
<li class="chapter" data-level="12.2" data-path="cost-and-security.html"><a href="cost-and-security.html#api-security"><i class="fa fa-check"></i><b>12.2</b> API security</a></li>
<li class="chapter" data-level="12.3" data-path="cost-and-security.html"><a href="cost-and-security.html#agent-security"><i class="fa fa-check"></i><b>12.3</b> Agent security</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>13</b> Conclusion</a>
<ul>
<li class="chapter" data-level="13.1" data-path="conclusion.html"><a href="conclusion.html#the-changing-landscape-of-scientific-computing"><i class="fa fa-check"></i><b>13.1</b> The changing landscape of scientific computing</a></li>
<li class="chapter" data-level="13.2" data-path="conclusion.html"><a href="conclusion.html#developing-community-standards"><i class="fa fa-check"></i><b>13.2</b> Developing community standards</a></li>
<li class="chapter" data-level="13.3" data-path="conclusion.html"><a href="conclusion.html#future-directions"><i class="fa fa-check"></i><b>13.3</b> Future directions</a></li>
<li class="chapter" data-level="13.4" data-path="conclusion.html"><a href="conclusion.html#recommendations-for-students-and-ecrs"><i class="fa fa-check"></i><b>13.4</b> Recommendations for students and ECRs</a></li>
<li class="chapter" data-level="13.5" data-path="conclusion.html"><a href="conclusion.html#what-should-supervisors-pis-do"><i class="fa fa-check"></i><b>13.5</b> What should supervisors (PIs) do?</a></li>
<li class="chapter" data-level="13.6" data-path="conclusion.html"><a href="conclusion.html#everyone"><i class="fa fa-check"></i><b>13.6</b> Everyone</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Quality R analysis with large language models</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="planning-your-analysis-with-ask-mode" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Planning your analysis with Ask mode<a href="planning-your-analysis-with-ask-mode.html#planning-your-analysis-with-ask-mode" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="stages-of-analysis" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Stages of analysis<a href="planning-your-analysis-with-ask-mode.html#stages-of-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are overall decisions you need to make when developing your analysis:</p>
<ol style="list-style-type: decimal">
<li>What types of statistics to use.</li>
<li>How to implement those statistics in R code.</li>
</ol>
<p>Its worthwhile separting these two decisions, as they are different issues. One is a science question, the other is a programming question.</p>
<p>When using Assistants its also worthwhile using different chat sessions to try and find answers.</p>
</div>
<div id="ask-mode" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Ask mode<a href="planning-your-analysis-with-ask-mode.html#ask-mode" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ask mode helps you plan analysis and implementation, using context from your project.</p>
<p>In VScode click the ‘octocat’ symbol that should be at the top towards the right. This will open the chat window.</p>
<p>The chat panel will appear down the bottom of this new sidebar. Confirm that the chatbot is currently set to ‘Ask’ mode.</p>
<p>Your current file will automatically be included as context for the prompt. You can drag and drop any other files here as well.</p>
<p>Start by asking the chatbot for guidance on a statistical analysis. We are interested in how the abundance of Topa relates to coral cover. For instance you could ask:</p>
<pre><code>How can I test the relationship between pres.topa and CB_cover?</code></pre>
<p>Evaluate the quality of its response and we will discuss.</p>
</div>
<div id="the-jagged-frontier-of-llm-progress" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> The jagged frontier of LLM progress<a href="planning-your-analysis-with-ask-mode.html#the-jagged-frontier-of-llm-progress" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>LLMs were created to write text. But it soon became apparent that they excel at writing programming code in many different languages.</p>
<p>Since then AI companies have been optimising their training and development for coding and logic.</p>
<p>There are a series of standardized tests that are used to compare quality of LLMs. Common evaluation tests are the SWE benchmark which looks at the ability of LLMs to autonomously create bug fixes. Current models get about <a href="https://www.swebench.com/">50% resolution on this benchmark</a>.</p>
<p>Their progress on math and logic is a bit more controversial. It seems like some of the math benchmarks (like AIME annual tests for top 5% highschool students) <a href="https://epoch.ai/frontiermath/the-benchmark">are saturated as LLMs are scoring close to 100% on these tests.</a>. So newer tests of unsolved maths problems are being developed.</p>
<p>However, others are finding that the ability of <a href="https://garymarcus.substack.com/p/reports-of-llms-mastering-math-have">LLMs on math and logic are overstated</a>, perhaps because the LLMs have been trained on the questions and the answers. Its also clear that AI companies have a strong financial incentive to find ways (real and otherwise) of improving on the benchmarks. Are the moment there is tough competition to be ‘industry leaders’ and grab market share with impressive results on benchmarks.</p>
<p>Either way, it does seem that the current areas of progress are programming, math and logic.</p>
<p>Evaluations on statistics and the R software are less common.</p>
<p>The limited evaluations of LLMs on their ability to identify the correct statistical procedure are less impressive than other benchmarks. <a href="https://arxiv.org/abs/2406.07815">An evaluation (published 2025) of several models, including GPT-4 as the most up-to-date model</a>, found accuracy at suggesting the correct statistical test of between 8% and 90%.</p>
<p>In general LLMs were good at choosing descriptive statistics (accuracy of up to 90% for GPT-4). Whereas when choosing inferential tests accuracy was much less impressive - GPT-4 scored between 20% and 43% accuracy on questions for which a contingency table was the correct answer.</p>
<p>The results also indicate the improvements that can be gained through better prompts (i.e. doubling in accuracy for GPT 4).</p>
<p>The lesson is two-fold. Just because LLMs excel at some tasks doesn’t mean they will excel at others. Second, good prompting strategies pay off.</p>
<p>For us in the niche R world there is also another lesson. The LLMs should be good at helping us implement analyses (ie write the R code). However, they are less reliable as statisticians who can guide us on the scientific question of what type of analysis to do.</p>
</div>
<div id="how-to-prompt-for-better-statistical-advice" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> How to prompt for better statistical advice<a href="planning-your-analysis-with-ask-mode.html#how-to-prompt-for-better-statistical-advice" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The limited number of evaluations of LLMs for statistics have found the biggest improvements for prompts that:</p>
<ul>
<li>Include domain knowledge in the prompt</li>
<li>Include data or summary data in the prompt</li>
<li>Combine domain knowledge with CoT (but CoT on its own doesn’t help)</li>
</ul>
<p>In addition, larger and more up-to-date models tend to be better. e.g. try Claude 4.0 over GPT-mini.</p>
<div id="guidelines-for-prompting-for-statistical-advice" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Guidelines for prompting for statistical advice<a href="planning-your-analysis-with-ask-mode.html#guidelines-for-prompting-for-statistical-advice" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Attach domain knowledge</strong> Try to find quality written advice from recognized researchers to include in your prompts.</p>
<p><strong>Always provide context on the data</strong> For instance, the model will give better advice for the prompt above if we tell it that <code>pres.topa</code> is integer counts (it will probably then recommend poisson GLM straight away). Likewise, if your replicates are different sites, tell that to the model so it has the opportunity to recommend approaches that are appropriate for spatial analysis.</p>
<p><strong>Attach data to your prompts</strong> You can attach the whole dataset if its in plain text (e.g. csv). Or write a <code>summary()</code> and/or <code>head()</code> to file and attach that.</p>
<p><strong>Combine the above approaches with Chain of Thought</strong> Just add ‘use Chain of Thought reasoning’ to your prompt. Its that easy.</p>
<p><strong>Double-up on chain of thought with self evaluation</strong> After the initial suggest try prompts like “are you sure?”, “Take a deep breath, count to ten and think deeply”, “Evaluate the quality of the options on a 1-5 scale”.</p>
<div class="tip">
<p><strong>Tip:</strong> Make a library of reference material for your prompting. If you see vignettes, blogs, or supplemental sections of papers that explain an analysis well, save them as text files to use in prompts.</p>
</div>
</div>
<div id="improving-our-initial-prompt-by-attaching-data" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Improving our initial prompt by attaching data<a href="planning-your-analysis-with-ask-mode.html#improving-our-initial-prompt-by-attaching-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Recall our initial prompt was:</p>
<pre><code>How can I statistically test the relationship between pres.topa and CB_cover?</code></pre>
<p>Try some of the strategies above (make a new prompt by clicking the + button) and compare the quality of advice.</p>
<p>For instance, you can save a data summary like this:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="planning-your-analysis-with-ask-mode.html#cb24-1" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="fu">head</span>(dat), <span class="st">&quot;resources/head-site-level-data.csv&quot;</span>)</span></code></pre></div>
<p>Then drag and drop it into the ask window and add something like:</p>
<pre><code>How can I statistically test the relationship between pres.topa and CB_cover? Here are the first 6 rows of data</code></pre>
</div>
<div id="improving-our-initial-prompt-by-attaching-domain-knowledge" class="section level3 hasAnchor" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Improving our initial prompt by attaching domain knowledge<a href="planning-your-analysis-with-ask-mode.html#improving-our-initial-prompt-by-attaching-domain-knowledge" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can further improve the response by attaching a trusted resource. e.g. <a href="https://environmentalcomputing.net/statistics/glms/glm-2/">save this webpage on count models for ecology</a> to your computer. Then you can attach the html file. That turned out to be a bit slow to compute (file too large?). Would be better if we had in plain text (e.g. copy and paste the text to a file, or use an extraction tool to extract text from the html).</p>
<p>If you installed the websearch tool (which will likely become default in future) then you could add a prompt like this:</p>
<pre><code>How can I statistically test the relationship between pres.topa and CB_cover? Here are the first 6 rows of data. pres.topa is my response and it is count data. Use @websearch to find robust recommendations for ecologists to analyse count data before proceeding with your recomemndations. </code></pre>
<p>That worked well for me. I then followed up with:</p>
<pre><code>Great. Evaluate the robustness of each suggestoin on a 1-10 scale</code></pre>
<p>And it gave me a nice summary suggesting to try overdispersion models first (which is a good suggestion).</p>
<p>The absolute best practice would be to give the assistant all the context for your study and observational design. Let’s see how doing that can work in our favour when planning implementation.</p>
</div>
</div>
<div id="planning-implementation" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Planning implementation<a href="planning-your-analysis-with-ask-mode.html#planning-implementation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The other main way to use Ask mode is for help in implementing an analysis. Many of our workflows are complex and involve multiple data wrangling steps.</p>
<p>To get the best out of GC I recommend creating a detailed README.md file with project context. Let’s try that and use it to plan our project.</p>
<p>Save the <a href="https://github.com/cbrown5/R-llm-workshop/tree/main/resources/benthic-analysis">README.md that his here to a local file</a>. (Remember that we are going to be using this as a prompt, so read it first).</p>
<p>Now you can attach it (or open it then click new chat). Given all the context you’ve provided you can just write something simple like:</p>
<pre><code>Help me plan R code to implement this analysis. </code></pre>
<p>Or</p>
<pre><code>Help me plan the workflow and scripts to implement this analysis</code></pre>
<p>I did this. It suggested both code (that looked approximatley correct) and the directory structure, sticking to my guideline in the readme about being modular.</p>
<p>You should iterative with Ask mode to if there are any refinements you want.</p>
<p>Let’s move onto edit mode to see how to put this plan to action.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="inline-code-editing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-your-code-with-edit-mode.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/06-ask-mode.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
